window.onload = function () { var t = getid("btn"), o = getid("tex"), r = !1, l = !1, n = !1, a = !1, c = !1, i = document.getElementsByClassName("texbtn")[0]; t.value = randomCode(), t.onclick = function () { t.value = randomCode() }, o.onblur = function () { var e = o.value.trim().toLowerCase(), n = t.value.toLowerCase(); e ? e == n ? (i.innerHTML = "验证码正确", i.style.color = "#58bc58", r = !0) : (i.innerHTML = "验证码不正确", i.style.color = "red") : alert(23) }; var s = getid("tex1"), u = document.getElementsByClassName("zhuce")[0]; s.onblur = function () { var e = s.value.trim(); if (e) if (checkReg.tel(e)) { var n = "APItype=uname&username=" + e + "&time=" + new Date; ajax("POST", "../api/reg.php", n, function (e) { console.log(e), "0" == e ? (u.innerHTML = "用户名已存在", u.style.color = "red") : (u.innerHTML = "用户名可以使用", u.style.color = "#58bc58", l = !0) }) } else u.innerHTML = "用户名错误", u.style.color = "red"; else u.innerHTML = "请填写用户名", u.style.color = "red" }; var d = getid("psw"), m = getid("psw1"), g = document.getElementsByClassName("password")[0], v = document.getElementsByClassName("password1")[0]; d.onblur = function () { var e = d.value.trim(); e && (checkReg.psweasy(e) ? (g.innerHTML = "密码可以使用", g.style.color = "#58bc58", c = !0) : (g.innerHTML = "密码不规范", g.style.color = "red")) }, m.onblur = function () { var e = m.value.trim(); checkReg.pwwagain(d.value, e) ? (v.innerHTML = "两次密码正确", v.style.color = "#58bc58", n = !0) : (v.innerHTML = "两次密码不正确", v.style.color = "red") }; var y = getid("che"); y.onclick = function () { y.checked ? e.style.background = "#bb2b34" : e.style.background = "#9a9a9a" }; var e = getid("btn2"); e.onclick = function () { if (y.checked) { if (a = !0, r && l && n && a && c) { var e = "APItype=reg&username=" + s.value + "&password=" + m.value + "&time=" + new Date; ajax("POST", "../api/reg.php", e, function (e) { console.log(e), "1" == e ? location.href = "login.html" : alert("注册失败") }) } } else alert("请同意协议") } };